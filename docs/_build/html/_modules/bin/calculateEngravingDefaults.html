<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bin.calculateEngravingDefaults &mdash; SMufoLib 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=139e30ab" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=01f34227"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            SMufoLib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html#running-scripts">Running Scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/request.html">Metadata Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/configuration.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Utility Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">converters</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils.html#normalizers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">normalizers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils.html#pointutils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pointUtils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils.html#stdutils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stdUtils</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">calculateEngravingDefaults</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html#module-bin.checkAnchors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">checkAnchors</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html#module-bin.generateMetadata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">generateMetadata</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html#module-bin.importAnchors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importAnchors</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html#module-bin.importID"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importID</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SMufoLib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">bin.calculateEngravingDefaults</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for bin.calculateEngravingDefaults</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin python3</span>
<span class="c1"># coding: utf-8</span>

<span class="sd">&quot;&quot;&quot;This script measures and sets engraving defaults based on the</span>
<span class="sd">dimensions, registration, metrics and/or point placement of appropriate</span>
<span class="sd">font glyphs.</span>

<span class="sd">With limited means of identification and control over the necessary</span>
<span class="sd">parameters, the script presently relies on a rather rudimentary and</span>
<span class="sd">somewhat error-prone process for calculating values. For this reason,</span>
<span class="sd">the results should be used only as a starting point for setting the</span>
<span class="sd">values of</span>
<span class="sd">:class:`~smufolib.objects.engravingDefaults.EngravingDefaults`</span>
<span class="sd">attributes.</span>

<span class="sd">The user has the option to override or skip any automatic measurements,</span>
<span class="sd">as well as reassign attributes to different ruler functions or glyphs</span>
<span class="sd">than the default. This is particularly useful for automatic</span>
<span class="sd">measurements of line widths for e.g. octave lines, pedal lines or</span>
<span class="sd">repeat endings, which are not represented by a particular SMuFL glyph,</span>
<span class="sd">but are often based on the thickness of other lines, such as staff</span>
<span class="sd">lines, leger lines, barlines, etc., depending on the desired</span>
<span class="sd">thickness.</span>

<span class="sd">.. note:: The setting</span>
<span class="sd">   for</span>
<span class="sd">   :attr:`~smufolib.objects.engravingDefaults.EngravingDefaults.textFontFamily`,</span>
<span class="sd">   which involves no measuring or calculation, has to be set manually</span>
<span class="sd">   with the ``override`` parameter.</span>

<span class="sd">This script requires that SMufoLib be installed within its executive</span>
<span class="sd">environment. It may also be imported as a module and contains the</span>
<span class="sd">following public functions:</span>

<span class="sd">* :func:`main` – Main function of the script.</span>
<span class="sd">* :func:`boundsLeft` – Returns absolute value of bounds x minimum.</span>
<span class="sd">* :func:`boundsHeight` – Returns absolute value of bounds height.</span>
<span class="sd">* :func:`stemDot` – Measures distance between stem and dot countour.</span>
<span class="sd">* :func:`xInner` – Measures distance between two adjacent x points of</span>
<span class="sd">  different contours.</span>
<span class="sd">* :func:`xOrigin` – Measures distance between two adjacent x points</span>
<span class="sd">  closest to origin.</span>
<span class="sd">* :func:`yInner` – Measures distance between two adjacent y points of</span>
<span class="sd">  different contours.</span>
<span class="sd">* :func:`yMinimum` – Measures distance between two adjacent low-points</span>
<span class="sd">  on y axis.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TYPE_CHECKING</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">smufolib</span> <span class="kn">import</span> <span class="n">Font</span><span class="p">,</span> <span class="n">cli</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">pointUtils</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">fontParts.fontshell.point</span> <span class="kn">import</span> <span class="n">RPoint</span>
    <span class="kn">from</span> <span class="nn">smufolib.objects.glyph</span> <span class="kn">import</span> <span class="n">Glyph</span>

<span class="n">CONFIG</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Parameter defaults</span>
<span class="n">EXCLUDE</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">OVERRIDE</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">SPACES</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">REMAP</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">MARGIN_OF_ERROR</span> <span class="o">=</span> <span class="mi">6</span>

<span class="c1"># pylint: disable=invalid-name, too-many-arguments</span>


<div class="viewcode-block" id="main">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.main">[docs]</a>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">font</span><span class="p">:</span> <span class="n">Font</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
         <span class="n">exclude</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">EXCLUDE</span><span class="p">,</span>
         <span class="n">override</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">OVERRIDE</span><span class="p">,</span>
         <span class="n">remap</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">REMAP</span><span class="p">,</span>
         <span class="n">spaces</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">SPACES</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main function of the script.</span>

<span class="sd">    :param font: Target font object or path to file.</span>
<span class="sd">    :param exclude: :class:`~smufolib.objects.engravingDefaults.EngravingDefaults`</span>
<span class="sd">     attributes to exclude. Defaults to ``None``.</span>
<span class="sd">    :param override: :class:`~smufolib.objects.engravingDefaults.EngravingDefaults`</span>
<span class="sd">     attributes to manually override mapped to their values. Defaults to ``None``.</span>
<span class="sd">    :param remap: :class:`~smufolib.objects.engravingDefaults.EngravingDefaults`</span>
<span class="sd">     attributes mapped to remappings :class:`dict`, e.g.:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            r = {</span>
<span class="sd">                &#39;arrowShaftThickness&#39;: {</span>
<span class="sd">                    &#39;ruler&#39;: &#39;boundsLeft&#39;,</span>
<span class="sd">                    &#39;glyph&#39;: &#39;uniEB60&#39;,</span>
<span class="sd">                    &#39;referenceIndex&#39;: 2</span>
<span class="sd">                }</span>
<span class="sd">            }</span>

<span class="sd">     Defaults to ``None``.</span>
<span class="sd">    :param spaces: set units of measurement to font units</span>
<span class="sd">     or :attr:`~smufolib.objects.smufl.Smufl.spaces`. Defaults to</span>
<span class="sd">     ``False``.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dispatcher</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;boundsHeight&#39;</span><span class="p">:</span> <span class="n">boundsHeight</span><span class="p">,</span>
        <span class="s1">&#39;boundsLeft&#39;</span><span class="p">:</span> <span class="n">boundsLeft</span><span class="p">,</span>
        <span class="s1">&#39;stemDot&#39;</span><span class="p">:</span> <span class="n">stemDot</span><span class="p">,</span>
        <span class="s1">&#39;xInner&#39;</span><span class="p">:</span> <span class="n">xInner</span><span class="p">,</span>
        <span class="s1">&#39;xOrigin&#39;</span><span class="p">:</span> <span class="n">xOrigin</span><span class="p">,</span>
        <span class="s1">&#39;yInner&#39;</span><span class="p">:</span> <span class="n">yInner</span><span class="p">,</span>
        <span class="s1">&#39;yMinimum&#39;</span><span class="p">:</span> <span class="n">yMinimum</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;arrowShaftThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniEB60&#39;</span><span class="p">),</span>
        <span class="s1">&#39;barlineSeparation&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xInner</span><span class="p">,</span> <span class="s1">&#39;uniE031&#39;</span><span class="p">),</span>
        <span class="s1">&#39;beamSpacing&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yInner</span><span class="p">,</span> <span class="s1">&#39;uniE1F9&#39;</span><span class="p">),</span>
        <span class="s1">&#39;beamThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE1F7&#39;</span><span class="p">),</span>
        <span class="s1">&#39;bracketThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE003&#39;</span><span class="p">),</span>
        <span class="s1">&#39;dashedBarlineDashLength&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yMinimum</span><span class="p">,</span> <span class="s1">&#39;uniE036&#39;</span><span class="p">),</span>
        <span class="s1">&#39;dashedBarlineGapLength&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yInner</span><span class="p">,</span> <span class="s1">&#39;uniE036&#39;</span><span class="p">),</span>
        <span class="s1">&#39;dashedBarlineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE036&#39;</span><span class="p">),</span>
        <span class="s1">&#39;hairpinThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yMinimum</span><span class="p">,</span> <span class="s1">&#39;uniE53E&#39;</span><span class="p">),</span>
        <span class="s1">&#39;hBarThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yMinimum</span><span class="p">,</span> <span class="s1">&#39;uniE4F0&#39;</span><span class="p">),</span>
        <span class="s1">&#39;legerLineExtension&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsLeft</span><span class="p">,</span> <span class="s1">&#39;uniE022&#39;</span><span class="p">),</span>
        <span class="s1">&#39;legerLineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE022&#39;</span><span class="p">),</span>
        <span class="s1">&#39;lyricLineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE010&#39;</span><span class="p">),</span>
        <span class="s1">&#39;octaveLineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE010&#39;</span><span class="p">),</span>
        <span class="s1">&#39;pedalLineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE010&#39;</span><span class="p">),</span>
        <span class="s1">&#39;repeatBarlineDotSeparation&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">stemDot</span><span class="p">,</span> <span class="s1">&#39;uniE040&#39;</span><span class="p">),</span>
        <span class="s1">&#39;repeatEndingLineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE030&#39;</span><span class="p">),</span>
        <span class="s1">&#39;slurEndpointThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE1FD&#39;</span><span class="p">),</span>
        <span class="s1">&#39;slurMidpointThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yMinimum</span><span class="p">,</span> <span class="s1">&#39;uniE1FD&#39;</span><span class="p">),</span>
        <span class="s1">&#39;staffLineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE010&#39;</span><span class="p">),</span>
        <span class="s1">&#39;stemThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE210&#39;</span><span class="p">),</span>
        <span class="s1">&#39;subBracketThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE030&#39;</span><span class="p">),</span>
        <span class="s1">&#39;textEnclosureThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">boundsHeight</span><span class="p">,</span> <span class="s1">&#39;uniE010&#39;</span><span class="p">),</span>
        <span class="s1">&#39;thickBarlineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE034&#39;</span><span class="p">),</span>
        <span class="s1">&#39;thinBarlineThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE030&#39;</span><span class="p">),</span>
        <span class="s1">&#39;thinThickBarlineSeparation&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xInner</span><span class="p">,</span> <span class="s1">&#39;uniE032&#39;</span><span class="p">),</span>
        <span class="s1">&#39;tieEndpointThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE1FD&#39;</span><span class="p">),</span>
        <span class="s1">&#39;tieMidpointThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">yMinimum</span><span class="p">,</span> <span class="s1">&#39;uniE1FD&#39;</span><span class="p">),</span>
        <span class="s1">&#39;tupletBracketThickness&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">xOrigin</span><span class="p">,</span> <span class="s1">&#39;uniE1FE&#39;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">font</span><span class="o">.</span><span class="n">smufl</span><span class="o">.</span><span class="n">spaces</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">mapping</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">exclude</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">ruler</span><span class="p">,</span> <span class="n">glyph</span> <span class="o">=</span> <span class="n">mapping</span>
        <span class="n">referenceIndex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">remap</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">remap</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;ruler&#39;</span> <span class="ow">in</span> <span class="n">remap</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="n">ruler</span> <span class="o">=</span> <span class="n">dispatcher</span><span class="p">[</span><span class="n">remap</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;ruler&#39;</span><span class="p">]]</span>
            <span class="k">if</span> <span class="s1">&#39;glyph&#39;</span> <span class="ow">in</span> <span class="n">remap</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="n">glyph</span> <span class="o">=</span> <span class="n">remap</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;glyph&#39;</span><span class="p">]</span>
            <span class="n">referenceIndex</span> <span class="o">=</span> <span class="n">remap</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;referenceIndex&#39;</span><span class="p">)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">ruler</span><span class="p">(</span><span class="n">font</span><span class="p">[</span><span class="n">glyph</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">referenceIndex</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">ruler</span><span class="p">(</span><span class="n">font</span><span class="p">[</span><span class="n">glyph</span><span class="p">],</span> <span class="n">referenceIndex</span><span class="o">=</span><span class="n">referenceIndex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">override</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">override</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">spaces</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">smufl</span><span class="o">.</span><span class="n">toUnits</span><span class="p">(</span><span class="n">override</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s1">&#39;textFontFamily&#39;</span> <span class="ow">in</span> <span class="n">override</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">override</span><span class="p">[</span><span class="s1">&#39;textFontFamily&#39;</span><span class="p">]</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="n">font</span><span class="o">.</span><span class="n">smufl</span><span class="o">.</span><span class="n">engravingDefaults</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">spaces</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">smufl</span><span class="o">.</span><span class="n">toSpaces</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting attribute &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">font</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done!&quot;</span><span class="p">)</span></div>



<span class="c1"># ------</span>
<span class="c1"># Rulers</span>
<span class="c1"># ------</span>


<div class="viewcode-block" id="boundsHeight">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.boundsHeight">[docs]</a>
<span class="k">def</span> <span class="nf">boundsHeight</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Height of the glyph bounds.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">glyph</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">glyph</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>



<div class="viewcode-block" id="boundsLeft">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.boundsLeft">[docs]</a>
<span class="k">def</span> <span class="nf">boundsLeft</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Absolute value of bounds x minimum.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">glyph</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>



<div class="viewcode-block" id="stemDot">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.stemDot">[docs]</a>
<span class="k">def</span> <span class="nf">stemDot</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">,</span> <span class="n">referenceIndex</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Distance between stem and dot countour.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>
<span class="sd">    :param referenceIndex: index of reference point.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">curves</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">,</span> <span class="s1">&#39;curve&#39;</span><span class="p">),</span>
                    <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">,</span> <span class="s1">&#39;line&#39;</span><span class="p">),</span>
                   <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="n">reference</span> <span class="o">=</span> <span class="n">curves</span><span class="p">[</span><span class="n">referenceIndex</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">point</span><span class="o">.</span><span class="n">contourIndex</span> <span class="o">!=</span> <span class="n">reference</span><span class="o">.</span><span class="n">contourIndex</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>



<div class="viewcode-block" id="xInner">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.xInner">[docs]</a>
<span class="k">def</span> <span class="nf">xInner</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">,</span> <span class="n">referenceIndex</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Distance between two adjacent x points of different contours.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>
<span class="sd">    :param referenceIndex: index of reference point.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">referenceIndex</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">contourIndex</span> <span class="o">!=</span> <span class="n">reference</span><span class="o">.</span><span class="n">contourIndex</span>
                <span class="ow">and</span> <span class="n">_areAdjacent</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)):</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>



<div class="viewcode-block" id="xOrigin">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.xOrigin">[docs]</a>
<span class="k">def</span> <span class="nf">xOrigin</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">,</span> <span class="n">referenceIndex</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Distance between two adjacent x points closest to origin.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>
<span class="sd">    :param referenceIndex: index of reference point.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="p">))</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">referenceIndex</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span>
                <span class="ow">and</span> <span class="n">point</span><span class="o">.</span><span class="n">contourIndex</span> <span class="o">==</span> <span class="n">reference</span><span class="o">.</span><span class="n">contourIndex</span>
                <span class="ow">and</span> <span class="n">_areAdjacent</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)):</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>



<div class="viewcode-block" id="yOrigin">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.yOrigin">[docs]</a>
<span class="k">def</span> <span class="nf">yOrigin</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">,</span> <span class="n">referenceIndex</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Distance between two adjacent x points closest to origin.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>
<span class="sd">    :param referenceIndex: index of reference point.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="p">))</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">referenceIndex</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span>
                <span class="ow">and</span> <span class="n">point</span><span class="o">.</span><span class="n">contourIndex</span> <span class="o">==</span> <span class="n">reference</span><span class="o">.</span><span class="n">contourIndex</span>
                <span class="ow">and</span> <span class="n">_areAdjacent</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)):</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>



<div class="viewcode-block" id="yInner">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.yInner">[docs]</a>
<span class="k">def</span> <span class="nf">yInner</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">,</span> <span class="n">referenceIndex</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Distance between two adjacent y points of different contours.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>
<span class="sd">    :param referenceIndex: index of reference point.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">referenceIndex</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">contourIndex</span> <span class="o">!=</span> <span class="n">reference</span><span class="o">.</span><span class="n">contourIndex</span>
                <span class="ow">and</span> <span class="n">_areAdjacent</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)):</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></div>



<div class="viewcode-block" id="yMinimum">
<a class="viewcode-back" href="../../scripts.html#bin.calculateEngravingDefaults.yMinimum">[docs]</a>
<span class="k">def</span> <span class="nf">yMinimum</span><span class="p">(</span><span class="n">glyph</span><span class="p">:</span> <span class="n">Glyph</span><span class="p">,</span> <span class="n">referenceIndex</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Distance between two adjacent low-points on axis y.</span>

<span class="sd">    :param glyph: Source :class:`~smufolib.objects.glyph.Glyph` of</span>
<span class="sd">     contours to measure.</span>
<span class="sd">    :param referenceIndex: index of reference point.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pointUtils</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">glyph</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">referenceIndex</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span>
                <span class="ow">and</span> <span class="n">point</span><span class="o">.</span><span class="n">contourIndex</span> <span class="o">==</span> <span class="n">reference</span><span class="o">.</span><span class="n">contourIndex</span>
                <span class="ow">and</span> <span class="n">_areAdjacent</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)):</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">reference</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></div>



<span class="k">def</span> <span class="nf">_areAdjacent</span><span class="p">(</span><span class="n">point1</span><span class="p">:</span> <span class="n">RPoint</span><span class="p">,</span> <span class="n">point2</span><span class="p">:</span> <span class="n">RPoint</span><span class="p">,</span>
                 <span class="n">axis</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># Checks if points are adjacent on axis.</span>
    <span class="c1"># Employs margin of error for point placement.</span>

    <span class="k">def</span> <span class="nf">withinRange</span><span class="p">(</span><span class="n">num1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num2</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">num2</span> <span class="o">-</span> <span class="n">MARGIN_OF_ERROR</span> <span class="o">&lt;=</span> <span class="n">num1</span> <span class="o">&lt;=</span> <span class="n">num2</span> <span class="o">+</span> <span class="n">MARGIN_OF_ERROR</span>

    <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">point2</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span>
    <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">point2</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span>

    <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
        <span class="n">checkAxis</span> <span class="o">=</span> <span class="n">withinRange</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
        <span class="n">checkAxis</span> <span class="o">=</span> <span class="n">withinRange</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">checkAxis</span> <span class="o">=</span> <span class="n">withinRange</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span> <span class="ow">or</span> <span class="n">withinRange</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">point1</span> <span class="o">!=</span> <span class="n">point2</span> <span class="ow">and</span> <span class="n">checkAxis</span>


<span class="k">def</span> <span class="nf">_parseArgs</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
    <span class="c1"># Parses command line arguments and options.</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
        <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">cli</span><span class="o">.</span><span class="n">commonParser</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">EXCLUDE</span><span class="p">,</span> <span class="n">spaces</span><span class="o">=</span><span class="n">SPACES</span><span class="p">)],</span>
        <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--override&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">OVERRIDE</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">            JSON string of attributes and values to manually override, e.g.</span>
<span class="s2">            {</span>
<span class="s2">                &quot;arrowShaftThickness&quot;: &lt;number&gt;,</span>
<span class="s2">                &quot;barlineSeparation&quot;: &lt;number&gt;</span>
<span class="s2">            }</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="s1">&#39;--remap&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">REMAP</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">            JSON string of ruler, glyph and referenceIndex remappings, e.g.</span>
<span class="s2">            {</span>
<span class="s2">                &quot;arrowShaftThickness&quot;: {</span>
<span class="s2">                    &quot;ruler&quot;: &quot;&lt;function name&gt;&quot;,</span>
<span class="s2">                    &quot;glyph&quot;: &quot;&lt;glyph name&gt;&quot;,</span>
<span class="s2">                    &quot;referenceIndex&quot;: &lt;number&gt;</span>
<span class="s2">                }</span>
<span class="s2">            }</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">_parseArgs</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">font</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">exclude</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">remap</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">override</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">spaces</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Knut Nergaard.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>